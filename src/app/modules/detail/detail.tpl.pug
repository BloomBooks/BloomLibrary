div.modal-dialog
    // "modal-___" are bootstrap classes used to create the modal look
    // We explicitly use these classes for all the pages which look like modals but aren't
    // such as Log In, Sign Up, Here It Comes, and the download preflight
    div.modal-content
        div.detail
            div.modal-header
                .returnToLibrary
                    a(ui-sref="browse")
                        <i class="material-icons">arrow_back</i>&nbsp;&nbsp;Return to the Library
            div.modal-body(role="dialog" aria-label="Details of the book")
                div.detailCol1
                    img.book-cover(ng-src="{{book.baseUrl | makeDetailSizedThumbnailUrl}}" alt="Cover thumbnail")
                div.detailCol2
                    h1.title.notranslate {{book.title}}
                    div.summary(ng-hide="!book.summary")
                        span.fori18n Summary:
                        = ' '
                        span.notranslate {{book.summary}}
                    div.detailPages
                        span.fori18n Pages:
                        = ' '
                        span.notranslate {{book.pageCount}}
                    div.languages(ng-show="book.langPointers.length")
                        span.fori18n Languages:
                        = ' '
                        span(ng-repeat="lang in book.langPointers")
                            a(ng-href="https://www.ethnologue.com/language/{{lang.ethnologueCode}}" target="_blank") {{lang.name}}
                            span(ng-hide="$last") ,
                                = ' '
                    div.copyright.notranslate {{book.copyright}}
                    div.license
                        span.fori18n License:
                        = ' '
                        span.notranslate
                            = ' '
                            a(href="javascript:void(null);" ng-click="showLicense()") {{book.license}}
                            span(ng-hide="!book.licenseNotes") . (
                            | {{book.licenseNotes}}
                            span(ng-hide="!book.licenseNotes") )
                    div.status
                        // Don't use updatedAt here because it is changed by things other than uploading, for example, when the librarian adds a tag (BL-2737).
                        span.fori18n Uploaded:
                        = ' '
                        span.notranslate {{book.createdAt | cleanDate}}
                        = ' '
                        span.fori18n by
                        = ' '
                        span.notranslate
                            a(ng-show="canReportViolation" href="mailto:{{book.uploader.username}}?subject=A%20request%20about%20a%20book%20you%20contributed%20to%20bloomlibrary.org:%20{{book.title}}%20({{book.objectId}})&body=This%20book%20may%20be%20found%20at%20{{location}}.") {{book.uploader.username | obfuscate}}
                            a(ng-hide="canReportViolation" href="" ng-click="showPleaseLogIn()") {{book.uploader.username | obfuscate}}
                    div.tags(ng-show="book.tags.length")
                        span.fori18n Tags:
                        = ' '
                        span(ng-repeat="tag in book.tags")
                            i.icon-tag(tx-content="exclude")
                            span(tx-content="include") {{tag | getDisplayName | getCleanBookshelfName}}
                            span(ng-hide="$last")
                                = ' '
                    .downloadSize(ng-show="downloadSize")
                        span.notranslate {{downloadSize | addMbLabel}}
                    div.relatedBooks(ng-show="book.relatedBooks")
                        span.fori18n Related Books:
                        = ' '
                        span.notranslate(ng-repeat="relBook in book.relatedBooks")
                            a(ui-sref="browse.detail({bookId: relBook.objectId})") {{relBook.title}}
                            span(ng-hide="$last") ,
                                = ' '
                    div.unfloat
                .actions.minor
                    a(tabIndex="-1" ng-hide="canReportViolation" href="" ng-click="showPleaseLogIn()" aria-label="Report a concern about this book")
                        i.abuseIcon(ng-attr-tabIndex="{{canReportViolation ? -1  : 0}}" tooltip="Report a concern about this book" tooltip-placement="right")
                    a(tabIndex="-1" ng-show="canReportViolation" ui-sref="browse.detail.reportbook" aria-label="Report a concern about this book")
                        i.abuseIcon(ng-attr-tabIndex="{{canReportViolation ? 0 : -1}}" tooltip="Report a concern about this book" tooltip-placement="right")
                    a(tabIndex="-1" href="" ng-click="showDeleteDialog()" aria-label="Delete this book")
                        i(ng-attr-tabIndex="{{canDeleteBook ? 0 : -1}}" tooltip="Delete this book" tooltip-placement="right" ng-class="{'icon-trash': true, 'icon-hidden':!canDeleteBook}")
                .actions.major
                    .button-container
                        // I have no idea why, but without ng-click (even though it is empty), the setting of preview=true in the url in the pdfoverlay directive (in app.js) doesn't work
                        a(ng-hide="isHarvested" ng-href="{{pdfPreviewUrl}}" ng-click="" pdfoverlay analytics-on analytics-event="Preview" analytics-book="{{book.objectId}}")
                            img.large-icon(src="/assets/pdfIcon.svg")

                        a(ng-show="isHarvested" ng-href="{{pdfDownloadUrl}}" target="_blank" download="{{book.title}}" analytics-on analytics-event="GetBook" analytics-book="{{book.objectId}}" analytics-type="pdf")
                            img.large-icon(src="/assets/pdfIcon.svg")
                        a(ng-show="isHarvested" ng-href="{{epubUrl}}" download="{{book.title}}" analytics-on analytics-event="GetBook" analytics-book="{{book.objectId}}" analytics-type="epub")
                            img.large-icon(src="/assets/ePUBIcon.svg")
                    .button-container.right
                        a(tabIndex="-1" ui-sref="browse.detail.downloadBook.preflight" tooltip="Download to the Bloom software on your computer, so that you can use it as a shell book." analytics-on analytics-event="GetBook" analytics-book="{{book.objectId}}" analytics-type="shell")
                            button.btn.btn-default(type="button")
                                //- helpful for multiline button formatting (see less)
                                span
                                    img.icon(src="/assets/shellDownloadIcon.svg")
                                    span Translate using Bloom Editor
                        a(ng-show="isHarvested" tabIndex="-1" ng-href="{{digitalDownloadUrl}}" tooltip="Use with Bloom's companion Android app, Bloom Reader" download="{{book.title}}" analytics-on analytics-event="GetBook" analytics-book="{{book.objectId}}" analytics-type="bloomd")
                            button.btn.btn-default(type="button")
                                //- helpful for multiline button formatting (see less)
                                span
                                    img.icon(src="/assets/brDownloadIcon.svg")
                                    span Download to Bloom Reader
                        // I have no idea why, but without ng-click (even though it is empty), the setting of preview=true in the url in the pdfoverlay directive (in app.js) doesn't work
                        a(ng-show="isHarvested" tabIndex="-1" ng-href="{{readUrl}}" ng-click="" pdfoverlay tooltip="Read now in your browser" analytics-on analytics-event="GetBook" analytics-book="{{book.objectId}}" analytics-type="read")
                            button.btn.btn-primary(type="button")
                                //- helpful for multiline button formatting (see less)
                                span
                                    img.icon(src="/assets/readIcon.svg")
                                    span Read
